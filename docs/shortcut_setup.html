<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Quick Expense Shortcut Setup</title>
    <style>
        body { font-family: -apple-system, sans-serif; padding: 20px; max-width: 600px; margin: 0 auto; }
        .step { margin-bottom: 25px; padding: 15px; background: #f5f5f7; border-radius: 10px; }
        .step-number { display: inline-block; background: #007aff; color: white; width: 24px; height: 24px; border-radius: 12px; text-align: center; line-height: 24px; margin-right: 10px; }
        code { background: #e8e8ed; padding: 2px 6px; border-radius: 4px; font-family: 'Menlo', monospace; }
        .note { background: #fff3cd; border-left: 4px solid #ffc107; padding: 10px; margin: 15px 0; }
    </style>
</head>
<body>
    <h1>ðŸ“± Quick Expense Shortcut Setup</h1>

    <div class="note">
        <strong>Note:</strong> Scan this QR code on your iPhone, then follow the instructions below to create the shortcut manually.
    </div>

    <div class="step">
        <h3><span class="step-number">1</span> Open Shortcuts App</h3>
        <p>Open the <strong>Shortcuts</strong> app on your iPhone.</p>
    </div>

    <div class="step">
        <h3><span class="step-number">2</span> Create New Shortcut</h3>
        <p>Tap the <strong>+</strong> icon in the top right.</p>
    </div>

    <div class="step">
        <h3><span class="step-number">3</span> Add Actions</h3>
        <p>Add these actions in order:</p>
        <ol>
            <li><strong>Ask for Input</strong> â†’ Question: "Amount?" â†’ Type: Number â†’ Save as: "Amount"</li>
            <li><strong>Choose from Menu</strong> â†’ Options: Food, Gas & Transportation, Entertainment, Subscriptions, Debt Payment, Other â†’ Save selection as: "Category"</li>
            <li><strong>Ask for Input</strong> â†’ Question: "Where? (Optional)" â†’ Type: Text â†’ Save as: "Merchant"</li>
            <li><strong>Get Contents of URL</strong> â†’ URL: <code>http://100.68.201.55:8080/finance/expense</code> â†’ Method: POST â†’ Headers: <code>Content-Type: application/json</code> â†’ Body: JSON (see below)</li>
            <li><strong>Get Dictionary Value</strong> â†’ Key: <code>budget_remaining</code> â†’ From: Contents of URL</li>
            <li><strong>Show Notification</strong> â†’ Title: "Expense Logged" â†’ Body: "Logged $[Amount] in [Category]. Budget remaining: $[Remaining]"</li>
        </ol>

        <p><strong>JSON Body for URL action:</strong></p>
        <pre><code>{
  "amount": "[Amount]",
  "category": "[Category]",
  "merchant": "[Merchant]",
  "description": "Logged from iPhone"
}</code></pre>
    </div>

    <div class="step">
        <h3><span class="step-number">4</span> Save Shortcut</h3>
        <p>Tap <strong>Next</strong>, name it "Quick Expense", choose the ðŸ’° icon, and tap <strong>Done</strong>.</p>
    </div>

    <div class="step">
        <h3><span class="step-number">5</span> Test It!</h3>
        <p>Run the shortcut and enter: <code>12.99</code> for amount, choose <code>Food</code> for category.</p>
        <p>You should get a notification confirming the expense was logged.</p>
    </div>

    <div class="note">
        <strong>Server IP:</strong> If your Tailscale IP changes, update the URL in the shortcut to: <code>http://[new-ip]:8080/finance/expense</code>
    </div>

    <p style="text-align: center; margin-top: 30px; color: #666; font-size: 0.9em;">
        Generated by NEXUS â€¢ "2026-01-23"
    </p>
</body>
</html>